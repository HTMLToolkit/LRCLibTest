<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LRCGetter</title>
  <link rel="stylesheet" href="./styles/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
  <script>eruda.init()</script>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img
          id="logo-img"
          src="./source-image-no-background-light.svg"
          data-logo-light="./source-image-no-background-light.svg"
          data-logo-dark="./source-image-no-background-dark.svg"
          alt="LRCGetter Logo"
          width="32"
          height="32"
        >
        <span>LRCGetter</span>
      </div>
      <div class="header-controls">
        <nav>
          <a href="#" class="nav-link active" data-view="search">Search</a>
          <a href="#" class="nav-link" data-view="get">Get</a>
          <a href="#" class="nav-link" data-view="publish">Publish</a>
          <a href="https://lrclib.net/docs" target="_blank" class="nav-link">Docs</a>
        </nav>
        <div class="theme-toggle" role="group" aria-label="Color theme">
          <button type="button" class="theme-btn" data-theme-mode="dark">Dark</button>
          <button type="button" class="theme-btn" data-theme-mode="light">Light</button>
          <button type="button" class="theme-btn" data-theme-mode="auto">Auto</button>
        </div>
      </div>
    </header>

    <main>
      <!-- Search View -->
      <section id="view-search" class="view active">
        <div class="view-header">
          <h1>Search Lyrics</h1>
          <p class="subtitle">Find synchronized and plain lyrics from the LRCLIB database</p>
        </div>
        <form id="form-search" class="form-card">
          <div class="form-group">
            <label for="search-q">Search query</label>
            <input type="text" id="search-q" name="q" placeholder="Search across all fields... ">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="search-track">Track name</label>
              <input type="text" id="search-track" name="track_name" placeholder="Track title">
            </div>
            <div class="form-group">
              <label for="search-artist">Artist name</label>
              <input type="text" id="search-artist" name="artist_name" placeholder="Artist">
            </div>
          </div>
          <div class="form-group">
            <label for="search-album">Album name</label>
            <input type="text" id="search-album" name="album_name" placeholder="Album">
          </div>
          <button type="submit" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
            Search
          </button>
        </form>

        <div id="search-results" class="results-container"></div>
      </section>

      <!-- Get View -->
      <section id="view-get" class="view">
        <div class="view-header">
          <h1>Get Lyrics</h1>
          <p class="subtitle">Retrieve lyrics by track signature or LRCLIB ID</p>
        </div>

        <div class="tabs">
          <button class="tab active" data-tab="signature">By Signature</button>
          <button class="tab" data-tab="id">By ID</button>
        </div>

        <div id="tab-signature" class="tab-content active">
          <form id="form-get-signature" class="form-card">
            <div class="form-row">
              <div class="form-group">
                <label for="get-track">Track name *</label>
                <input type="text" id="get-track" name="track_name" required placeholder="Track title">
              </div>
              <div class="form-group">
                <label for="get-artist">Artist name *</label>
                <input type="text" id="get-artist" name="artist_name" required placeholder="Artist">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="get-album">Album name *</label>
                <input type="text" id="get-album" name="album_name" required placeholder="Album">
              </div>
              <div class="form-group">
                <label for="get-duration">Duration (seconds) *</label>
                <input type="number" id="get-duration" name="duration" required placeholder="e.g.  233">
              </div>
            </div>
            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="get-cached" name="cached">
                <span>Use cached endpoint only (faster, no external lookups)</span>
              </label>
            </div>
            <button type="submit" class="btn btn-primary">Get Lyrics</button>
          </form>
        </div>

        <div id="tab-id" class="tab-content">
          <form id="form-get-id" class="form-card">
            <div class="form-group">
              <label for="get-id">LRCLIB ID *</label>
              <input type="text" id="get-id" name="id" required placeholder="e.g. 3396226">
            </div>
            <button type="submit" class="btn btn-primary">Get Lyrics</button>
          </form>
        </div>

        <div id="get-results" class="results-container"></div>
      </section>

      <!-- Publish View -->
      <section id="view-publish" class="view">
        <div class="view-header">
          <h1>Publish Lyrics</h1>
          <p class="subtitle">Contribute lyrics to the LRCLIB database</p>
        </div>

        <form id="form-publish" class="form-card">
          <div class="form-row">
            <div class="form-group">
              <label for="pub-track">Track name *</label>
              <input type="text" id="pub-track" name="trackName" required placeholder="Track title">
            </div>
            <div class="form-group">
              <label for="pub-artist">Artist name *</label>
              <input type="text" id="pub-artist" name="artistName" required placeholder="Artist">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="pub-album">Album name *</label>
              <input type="text" id="pub-album" name="albumName" required placeholder="Album">
            </div>
            <div class="form-group">
              <label for="pub-duration">Duration (seconds) *</label>
              <input type="number" id="pub-duration" name="duration" required placeholder="e.g.  233">
            </div>
          </div>
          <div class="form-group">
            <label for="pub-plain">Plain Lyrics</label>
            <textarea id="pub-plain" name="plainLyrics" rows="6" placeholder="Plain text lyrics (one line per line)"></textarea>
          </div>
          <div class="form-group">
            <label for="pub-synced">Synchronized Lyrics (LRC format)</label>
            <textarea id="pub-synced" name="syncedLyrics" rows="6" placeholder="[00:17. 12] First line of lyrics&#10;[00:22.45] Second line... "></textarea>
          </div>

          <div class="challenge-section">
            <div class="challenge-header">
              <h3>Proof of Work Challenge</h3>
              <p class="muted">Required to prevent spam.  Click to request and solve automatically. (This will take a while)</p>
            </div>
            <div class="challenge-controls">
              <button type="button" id="btn-challenge" class="btn btn-secondary">Request Challenge</button>
              <button type="button" id="btn-solve" class="btn btn-secondary" disabled>Solve Challenge</button>
              <button type="button" id="btn-cancel" class="btn btn-ghost" disabled>Cancel</button>
            </div>
            <div id="challenge-status" class="challenge-status"></div>
            <input type="hidden" id="pub-prefix" name="prefix">
            <input type="hidden" id="pub-nonce" name="nonce">
          </div>

          <button type="submit" class="btn btn-primary btn-lg">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"></path></svg>
            Publish Lyrics
          </button>
        </form>

        <div id="publish-results" class="results-container"></div>
      </section>
    </main>

    <footer>
      <p>Alternative frontend for <a href="https://lrclib.net" target="_blank">LRCLIB</a>, the free lyrics database.</p>
    </footer>
  </div>

  <script type="module" src="./src/main.js"></script>
</body>
</html>